<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubu Dudu Store ‰∏Ä‰∫åÂ∏ÉÂ∏ÉÂïÜÂ∫ó</title>
    <link rel="icon" type="image/png" href="https://i.postimg.cc/XqPRJTcj/Whats-App-Image-2026-01-11-at-6-52-12-PM-2-removebg-preview.png">

    <style>
        /* --- Âü∫Á°ÄÊ†∑Âºè --- */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #fafafa; margin: 0; padding: 20px; color: #262626; padding-bottom: 80px; }
        
        header { text-align: center; margin-bottom: 20px; padding-top: 10px; }
        .store-logo { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; border: 4px solid #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 12px; }
        h1 { margin: 0; font-size: 22px; color: #262626; font-weight: 800; letter-spacing: -0.5px; }
        p.subtitle { color: #8e8e8e; font-size: 13px; margin-top: 6px; }

        /* Ë¥ßÂ∏ÅÈÄâÊã©Âô®Ê†∑Âºè */
        .currency-wrapper { text-align: center; margin-bottom: 20px; }
        .currency-select {
            padding: 8px 12px; border-radius: 20px; border: 1px solid #ddd;
            background-color: #fff; font-size: 14px; font-weight: bold; color: #333;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); outline: none; cursor: pointer;
        }

        .search-wrapper { margin-bottom: 20px; }
        .search-box { width: 100%; padding: 12px 15px; border: 1px solid #dbdbdb; border-radius: 8px; background-color: #efefef; font-size: 16px; box-sizing: border-box; outline: none; }
        
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; }
        
        .product-card { background: white; border: 1px solid #dbdbdb; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; padding-bottom: 15px; position: relative;}
        
        /* ËΩÆÊí≠Âõæ */
        .carousel-wrapper { position: relative; width: 100%; height: 300px; background-color: #ffffff; }
        .carousel-scroll { display: flex; width: 100%; height: 100%; overflow-x: auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; }
        .carousel-img { flex: 0 0 100%; width: 100%; height: 100%; object-fit: contain; scroll-snap-align: start; }
        .carousel-scroll::-webkit-scrollbar { display: none; }
        .carousel-badge { position: absolute; bottom: 10px; right: 10px; background: rgba(0,0,0,0.6); color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px; pointer-events: none; }

        .product-header { padding: 15px; border-bottom: 1px solid #eee; }
        .product-name { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
        .product-desc { font-size: 13px; color: #666; white-space: pre-line; }

        .options-container { padding: 10px 15px; display: flex; flex-direction: column; gap: 12px; }
        .option-row { display: flex; align-items: center; border: 1px solid #eee; border-radius: 8px; padding: 10px; background-color: #fcfcfc; }
        .option-thumb { width: 70px; height: 70px; border-radius: 6px; object-fit: contain; margin-right: 12px; border: 1px solid #eee; background: #fff;}
        .option-details { flex: 1; }
        .option-title { font-size: 14px; font-weight: bold; color: #333; }
        .option-price { color: #E1306C; font-weight: bold; font-size: 15px; margin-top: 2px; }
        
        .qty-row { margin-top: 5px; display: flex; align-items: center; font-size: 12px; color: #666;}
        .qty-input { width: 40px; padding: 2px; text-align: center; border: 1px solid #ccc; border-radius: 4px; margin-left: 5px; }

        .action-btn { padding: 8px 12px; border: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; margin-left: 10px; white-space: nowrap; }
        .btn-blue { background-color: #0095f6; color: white; }
        .btn-orange { background-color: #fca311; color: white; }
        .btn-purple { background-color: #8338ec; color: white; }
        button:active { opacity: 0.7; }

        /* --- ÂºπÁ™óÊ†∑Âºè --- */
        .modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center;
        }
        .modal-content {
            background-color: #fff; padding: 20px; border-radius: 12px;
            width: 85%; max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); text-align: left; position: relative;
            max-height: 90vh; overflow-y: auto;
        }
        .modal-header { font-size: 18px; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .close-modal { position: absolute; right: 20px; top: 15px; font-size: 24px; cursor: pointer; color: #999; }
        
        .modal-preview-wrapper { text-align: center; margin-bottom: 15px; background: #f9f9f9; border-radius: 8px; padding: 10px; }
        .modal-preview-img { width: 100%; height: 220px; object-fit: contain; border-radius: 8px; }

        .modal-section { margin-bottom: 15px; }
        .modal-label { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 8px; display: block; }
        
        .selection-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .selection-btn {
            border: 1px solid #ddd; background: #fff; padding: 10px; border-radius: 8px;
            text-align: center; font-size: 14px; cursor: pointer; transition: 0.2s;
        }
        .selection-btn.selected { background-color: #e3f2fd; border-color: #0095f6; color: #0095f6; font-weight: bold; }

        .confirm-btn {
            width: 100%; padding: 12px; background-color: #0095f6; color: white;
            border: none; border-radius: 8px; font-size: 16px; font-weight: bold; margin-top: 10px; cursor: pointer;
        }

        /* Footer & Social */
        footer { margin-top: 40px; padding: 20px; background-color: #fff; border-top: 1px solid #eee; border-radius: 12px; text-align: center; font-size: 13px; color: #666; line-height: 1.6; }
        .footer-title { font-weight: bold; color: #333; margin-bottom: 8px; font-size: 14px; }
        .social-section { margin-top: 25px; border-top: 1px solid #eee; padding-top: 20px; }
        .social-icons { display: flex; justify-content: center; gap: 25px; align-items: center; margin-top: 10px;}
        .social-link img { width: 40px; height: 40px; border-radius: 8px; display: block; }
        
        .float-btn { position: fixed; bottom: 20px; right: 20px; background-color: #25D366; color: white; padding: 10px 20px; border-radius: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); font-weight: bold; text-decoration: none; z-index: 100; display: flex; align-items: center; gap: 8px; }
        .wa-logo-img { width: 24px; height: 24px; object-fit: contain; }
    </style>
</head>
<body>

    <header>
        <img src="https://i.postimg.cc/pXqynd9c/Bubu-dudu-shop-logo.jpg" alt="Bubu Dudu Store Logo" class="store-logo">
        <h1>Bubu Dudu Store ‰∏Ä‰∫åÂ∏ÉÂ∏ÉÂïÜÂ∫ó</h1>
        <p class="subtitle">100% Authentic Blind Boxes ¬∑ Custom Video | WhatsApp Order</p>
    </header>
    
    <div class="currency-wrapper">
        <select id="currencySelector" class="currency-select" onchange="changeCurrency()">
            <option value="MYR">üá≤üáæ MYR (È©¨Â∏Å)</option>
            <option value="SGD">üá∏üá¨ SGD (Êñ∞Â∏Å)</option>
            <option value="USD">üá∫üá∏ USD (ÁæéÈáë)</option>
        </select>
    </div>

    <div class="search-wrapper">
        <input type="text" id="searchInput" class="search-box" placeholder="üîç Search Products...">
    </div>

    <div id="productContainer" class="product-grid"></div>

    <footer>
        <div class="footer-title">üì¶ Purchase Info (Ë¥≠‰π∞È°ªÁü•)</div>
        <p>
            <b>Shipping (Blind Box & Plushie):</b> J&T Express / PosLaju<br>
            <b>Custom Video:</b> üåç Global Delivery (Online)<br>
            ‚ö†Ô∏è No return after opening (ÊãÜÂ∞Å‰∏çÈÄÄÊç¢)<br>
            <span style="font-size:12px; color:#E1306C; font-weight:bold;">
                * Foreign currency prices are estimates only. Final price confirmed via WhatsApp.<br>
                (Ê±áÁéá‰ªÖ‰æõÂèÇËÄÉÔºåÂÖ∑‰Ωì‰ª∑Ê†º‰ª•ÁßÅËÅä‰∏∫ÂáÜ)
            </span>
        </p>

        <div class="social-section">
            <span style="font-weight:bold; font-size:14px;">Follow Us ÂÖ≥Ê≥®Êàë‰ª¨</span>
            <div class="social-icons">
                <a href="https://xhslink.com/m/5bQZ298AzfF" target="_blank" class="social-link"><img src="https://i.postimg.cc/Jz7q8tXg/Xiaohongshu-LOGO.png"></a>
                <a href="https://www.instagram.com/bubu_dudu_store?igsh=cWt3enZpZGszNWJx" target="_blank" class="social-link"><img src="https://i.postimg.cc/9fKtypkw/Instagram-icon.png"></a>
                <a href="https://www.tiktok.com/@yierlovebubu1212?_r=1&_t=ZS-92KcH6zZuSd" target="_blank" class="social-link"><img src="https://i.postimg.cc/76z19zvQ/tiktok-app-icon-social-media-logo-277909-647.avif"></a>
            </div>
        </div>
        <p style="margin-top:20px; font-size:12px; color:#999;">¬© 2025 Bubu Dudu Store ‰∏Ä‰∫åÂ∏ÉÂ∏ÉÂïÜÂ∫ó</p>
    </footer>

    <a href="https://wa.me/601110720061?text=Hi%20Bubu%20Dudu%20Store" target="_blank" class="float-btn">
        <img src="https://i.postimg.cc/YCkWKP5R/Whats-App-svg.webp" class="wa-logo-img"> Chat
    </a>

    <div id="plushieModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div class="modal-header">Choose Options (ÈÄâÊã©ËßÑÊ†º)</div>
            
            <div class="modal-preview-wrapper">
                <img id="modalPreviewImg" src="" class="modal-preview-img">
            </div>

            <div class="modal-section">
                <span class="modal-label">1. Character (Ê¨æÂºè) <span style="color:red">*</span></span>
                <div class="selection-grid" id="charGrid">
                    <div class="selection-btn" onclick="selectChar(this, 'Bubu (‰∏Ä‰∫å)', 'https://i.postimg.cc/zbbjL2wx/Whats-App-Image-2026-02-01-at-12-17-46-PM-(2).jpg')">üêª‚Äç‚ùÑÔ∏è Bubu (‰∏Ä‰∫å)</div>
                    <div class="selection-btn" onclick="selectChar(this, 'Dudu (Â∏ÉÂ∏É)', 'https://i.postimg.cc/sQQcBHP4/Whats-App-Image-2026-02-01-at-12-17-47-PM.jpg')">üêª Dudu (Â∏ÉÂ∏É)</div>
                    <div class="selection-btn" style="grid-column: span 2;" onclick="selectChar(this, 'Pair (‰∏ÄÂØπ)', 'https://i.postimg.cc/Hx3PhfVf/Whats-App-Image-2026-02-01-at-12-21-33-PM.jpg')">üíï Pair (‰∏ÄÂØπ)</div>
                </div>
            </div>

            <div class="modal-section">
                <span class="modal-label">2. Size (Â∞∫ÂØ∏) <span style="color:red">*</span></span>
                <div class="selection-grid" id="sizeGrid">
                    <div class="selection-btn size-btn" data-price-rm="25" onclick="selectSize(this, '25cm', 25, 'https://i.postimg.cc/Bt13sqFj/Whats-App-Image-2026-02-01-at-12-41-31-PM.jpg')">25cm</div>
                    <div class="selection-btn size-btn" data-price-rm="40" onclick="selectSize(this, '35cm', 40, 'https://i.postimg.cc/Bt13sqFj/Whats-App-Image-2026-02-01-at-12-41-31-PM.jpg')">35cm</div>
                    <div class="selection-btn size-btn" data-price-rm="60" onclick="selectSize(this, '45cm', 60, 'https://i.postimg.cc/V0MPFR1P/Whats-App-Image-2026-02-01-at-12-41-31-PM-(1).jpg')">45cm</div>
                    <div class="selection-btn size-btn" data-price-rm="90" onclick="selectSize(this, '60cm', 90, 'https://i.postimg.cc/V0MPFR1P/Whats-App-Image-2026-02-01-at-12-41-31-PM-(1).jpg')">60cm</div>
                </div>
            </div>

            <button class="confirm-btn" onclick="confirmPlushieOrder()">Confirm Order (Á°ÆËÆ§‰∏ãÂçï)</button>
        </div>
    </div>

    <script>
        const myPhoneNumber = "601110720061"; 
        
        // ‚ú® Ê±áÁéáËÆæÁΩÆ (Â∑≤Êõ¥Êñ∞Ôºö0.4 SGD, 0.35 USD)
        const exchangeRates = {
            'MYR': { rate: 1, symbol: 'RM' },
            'SGD': { rate: 0.40, symbol: 'S$' },
            'USD': { rate: 0.35, symbol: 'US$' }
        };
        let currentCurrency = 'MYR';

        let selectedCharacter = "";
        let selectedSize = "";
        let selectedPriceRM = 0; 

        // ÈªòËÆ§Â∞ÅÈù¢Âõæ
        const defaultPlushieImg = "https://i.postimg.cc/PCFhTNSM/Whats-App-Image-2026-02-01-at-1-04-39-PM.jpg";

        const products = [
            // 1. ÂÆöÂà∂ËßÜÈ¢ë
            {
                id: 'custom-video',
                name: "Custom Bubu Dudu Video (‰∏ìÂ±ûÂÆöÂà∂ËßÜÈ¢ë)",
                desc: "We create the most heartwarming custom videos for you! \nAnniversaries, Birthdays, Proposals.\n\nüåç **Global Delivery / ÂÖ®ÁêÉ‰∫§‰ªò**", 
                price: 0, isCustom: true, inStock: true,
                imgProducts: ["https://i.postimg.cc/yxhjTRqY/bubu-dudu-custom-video.jpg"],
                imgSingle: "https://i.postimg.cc/yxhjTRqY/bubu-dudu-custom-video.jpg"
            },
            // 2. ÊØõÁªíÂÖ¨‰ªî
            { 
                id: 3, 
                name: "Bubu Dudu Plushie Doll (‰∏Ä‰∫åÂ∏ÉÂ∏ÉÁªíÊØõÂÖ¨‰ªî)", 
                desc: "Super soft! Bubu (Panda) & Dudu (Bear). \n\nüìè **Sizes:** 25cm / 35cm / 45cm / 60cm", 
                price: 25, priceMax: 90, 
                inStock: true, isCustom: false, isPlushie: true,
                imgProducts: [
                    "https://i.postimg.cc/PCFhTNSM/Whats-App-Image-2026-02-01-at-1-04-39-PM.jpg", 
                    "https://i.postimg.cc/Hx3PhfVf/Whats-App-Image-2026-02-01-at-12-21-33-PM.jpg", 
                    "https://i.postimg.cc/zbbjL2wx/Whats-App-Image-2026-02-01-at-12-17-46-PM-(2).jpg", 
                    "https://i.postimg.cc/sQQcBHP4/Whats-App-Image-2026-02-01-at-12-17-47-PM.jpg", 
                    "https://i.postimg.cc/qvJsqzqv/Whats-App-Image-2026-02-01-at-1-04-39-PM-(2).jpg", 
                    "https://i.postimg.cc/fJ4Hdsrt/Whats-App-Image-2026-02-01-at-12-17-45-PM.jpg", 
                    "https://i.postimg.cc/Bt13sqFj/Whats-App-Image-2026-02-01-at-12-41-31-PM.jpg", 
                    "https://i.postimg.cc/V0MPFR1P/Whats-App-Image-2026-02-01-at-12-41-31-PM-(1).jpg",
                    "https://i.postimg.cc/KYPWnKFD/Whats-App-Image-2026-02-01-at-12-17-45-PM-(1).jpg",
                    "https://i.postimg.cc/qhhLtDcm/Whats-App-Image-2026-02-01-at-12-17-45-PM-(2).jpg",
                    "https://i.postimg.cc/N994yC8b/Whats-App-Image-2026-02-01-at-12-17-46-PM.jpg",
                    "https://i.postimg.cc/sQQcBHPJ/Whats-App-Image-2026-02-01-at-12-17-46-PM-(1).jpg"
                ],
                imgSingle: "https://i.postimg.cc/PCFhTNSM/Whats-App-Image-2026-02-01-at-1-04-39-PM.jpg",
                imgWhole:  ""    
            },
            // 3. Áõ≤Áõí
            { 
                id: 1, name: "Bubu Dudu Series 2 (‰∏Ä‰∫åÂ∏ÉÂ∏É Á¨¨‰∫åÂºπ)", desc: "Super cute blind box! Swipe left üëâ", price: 25, wholeSetPrice: 200, setCount: 10, inStock: true,
                imgProducts: ["https://i.postimg.cc/HnXMk5MF/di-er-dan-chan-pin1.jpg","https://i.postimg.cc/FsbctyNJ/di-er-dan-chan-pin2.jpg","https://i.postimg.cc/XvqyytFv/di-er-dan-chan-pin3.jpg"],
                imgSingle: "https://i.postimg.cc/521tV8yz/di-er-dan-yi-he.jpg", imgWhole: "https://i.postimg.cc/2jMmzhcd/di-er-dan-duan-he.jpg"    
            },
            // 4. Áõ≤Áõí
            { 
                id: 2, name: "Bubu Dudu Series 3 (‰∏Ä‰∫åÂ∏ÉÂ∏É Á¨¨‰∏âÂºπ)", desc: "New Series 3 released! ‚ú®", price: 25, wholeSetPrice: 240, setCount: 12, inStock: true,
                imgProducts: ["https://i.postimg.cc/Yq6PYfcx/di-san-dan-chan-pin1.jpg","https://i.postimg.cc/MHy90xLz/di-san-dan-chan-pin2.jpg","https://i.postimg.cc/g0XqqmXd/di-san-dan-chan-pin3.jpg"],
                imgSingle: "https://i.postimg.cc/SRXZnC6n/di-san-dan-dan-he.jpg", imgWhole: "https://i.postimg.cc/xdRph0fh/di-san-dan-duan-he.jpg"    
            }
        ];

        const container = document.getElementById('productContainer');
        const searchInput = document.getElementById('searchInput');

        // --- ‰ª∑Ê†ºÊ†ºÂºèÂåñ ---
        function formatPrice(priceInRM) {
            const currencyData = exchangeRates[currentCurrency];
            const converted = (priceInRM * currencyData.rate).toFixed(2);
            return `${currencyData.symbol} ${converted}`;
        }

        function changeCurrency() {
            const selector = document.getElementById('currencySelector');
            currentCurrency = selector.value;
            renderProducts(products);
            updateModalPrices();
        }

        function renderProducts(items) {
            container.innerHTML = "";
            if(items.length === 0) { container.innerHTML = "<p style='text-align:center;width:100%'>No products found</p>"; return; }
            items.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';

                let slidesHtml = '';
                if(product.imgProducts && product.imgProducts.length > 0) {
                    product.imgProducts.forEach(imgUrl => { slidesHtml += `<img src="${imgUrl}" class="carousel-img">`; });
                } else { slidesHtml = `<img src="https://via.placeholder.com/600x400" class="carousel-img">`; }

                let wholeSetOptionHtml = '';
                let priceDisplay = '';
                
                if(product.isPlushie) {
                    priceDisplay = `${formatPrice(product.price)} - ${formatPrice(product.priceMax)}`;
                } else {
                    priceDisplay = `${formatPrice(product.price)} / each`;
                }

                let singleBtnText = "Single / Êï£Áõí";
                let btnColorClass = "btn-blue";
                let qtyDisplay = `Qty: <input type="number" id="qty-${product.id}" class="qty-input" value="1" min="1">`;
                let clickAction = "";

                if (product.isCustom) {
                    priceDisplay = "DM for Quote / ÁßÅ‰ø°ËØ¢‰ª∑";
                    singleBtnText = "Inquire / Âí®ËØ¢";
                    btnColorClass = "btn-purple";
                    qtyDisplay = ""; 
                    clickAction = `orderCustomVideo('${product.name}')`;
                } 
                else if (product.isPlushie) {
                    singleBtnText = "Choose Size / ÈÄâÂ∞∫ÂØ∏";
                    btnColorClass = "btn-blue";
                    qtyDisplay = ""; 
                    clickAction = `openPlushieModal()`;
                }
                else {
                    clickAction = `orderSingle('${product.name}', ${product.price}, '${product.id}')`;
                    if (product.wholeSetPrice && product.setCount) {
                        wholeSetOptionHtml = `
                            <div class="option-row">
                                <img src="${product.imgWhole}" class="option-thumb" alt="Whole Set">
                                <div class="option-details">
                                    <div class="option-title">üî• Whole Set (${product.setCount} pcs)</div>
                                    <div class="option-price">${formatPrice(product.wholeSetPrice)}</div>
                                </div>
                                <button class="action-btn btn-orange" onclick="orderWholeSet('${product.name}', ${product.wholeSetPrice}, ${product.setCount})">
                                    Set / Á´ØÁõí
                                </button>
                            </div>
                        `;
                    }
                }

                card.innerHTML = `
                    <div style="height:100%; display:flex; flex-direction:column;">
                        ${!product.inStock ? '<div class="sold-out-overlay">‚ùå Sold Out</div>' : ''}
                        <div class="carousel-wrapper">
                            <div class="carousel-scroll">${slidesHtml}</div>
                            <div class="carousel-badge">Swipe ‚Üî</div>
                        </div>
                        <div class="product-header">
                            <div class="product-name">${product.name}</div>
                            <div class="product-desc">${product.desc}</div>
                        </div>
                        <div class="options-container">
                            <div class="option-row">
                                <img src="${product.imgSingle}" class="option-thumb" alt="Item">
                                <div class="option-details">
                                    <div class="option-title">${product.isCustom ? "Personalized Custom Video" : (product.isPlushie ? "Plushie Doll" : "Single Box (Random)")}</div>
                                    <div class="option-price" style="${product.isCustom ? 'color:#8338ec' : ''}">${priceDisplay}</div>
                                    <div class="qty-row">${qtyDisplay}</div>
                                </div>
                                <button class="action-btn ${btnColorClass}" onclick="${clickAction}">
                                    ${singleBtnText}
                                </button>
                            </div>
                            ${wholeSetOptionHtml}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- ÂäüËÉΩÂáΩÊï∞ ---
        function orderCustomVideo(name) {
            const message = `Hi Bubu Dudu Store, Custom Video! üêª\n\nI am interested in:\nüé• **${name}**\n\nI would like to request a quote for a custom video.`;
            sendToWhatsapp(message);
        }

        function orderSingle(name, priceRM, id) {
            const qtyInput = document.getElementById(`qty-${id}`);
            const quantity = qtyInput.value;
            const totalPriceRM = priceRM * quantity;
            const totalPriceForeign = formatPrice(totalPriceRM);
            const message = `Hi Bubu Dudu Store, Bubu Dudu Blind Box! \n\nI want to order:\nItem: ${name}\nType: Single Box\nQty: ${quantity}\nTotal: RM ${totalPriceRM} (approx ${totalPriceForeign})\n\nIs this available?`;
            sendToWhatsapp(message);
        }

        function orderWholeSet(name, setPriceRM, count) {
            const setPriceForeign = formatPrice(setPriceRM);
            const message = `Hi Bubu Dudu Store, Bubu Dudu Blind Box! \n\nI want to order:\nItem: ${name}\nType: üî• Whole Set (${count}pcs)\nPrice: RM ${setPriceRM} (approx ${setPriceForeign})\n\nIs this available?`;
            sendToWhatsapp(message);
        }

        // --- ÂºπÁ™óÈÄªËæë ---
        function openPlushieModal() {
            document.getElementById('plushieModal').style.display = 'flex';
            document.getElementById('modalPreviewImg').src = defaultPlushieImg; 
            selectedCharacter = ""; selectedSize = ""; selectedPriceRM = 0;
            updateSelectionUI('charGrid', null); updateSelectionUI('sizeGrid', null);
            updateModalPrices(); 
        }
        function closeModal() { document.getElementById('plushieModal').style.display = 'none'; }
        
        function updateModalPrices() {
            const btns = document.querySelectorAll('.size-btn');
            btns.forEach(btn => {
                const basePrice = btn.getAttribute('data-price-rm');
                const sizeLabel = btn.innerText.split('(')[0].trim(); 
                if(sizeLabel.includes('cm')) {
                     const pureSize = sizeLabel.replace(/[^0-9]cm/g, '').substring(0, 4); 
                     btn.innerText = `${pureSize} (${formatPrice(basePrice)})`;
                }
            });
        }

        function selectChar(element, char, imgUrl) { 
            selectedCharacter = char; 
            updateSelectionUI('charGrid', element);
            document.getElementById('modalPreviewImg').src = imgUrl;
        }

        function selectSize(element, size, priceRM, imgUrl) { 
            selectedSize = size; 
            selectedPriceRM = priceRM; 
            updateSelectionUI('sizeGrid', element);
            document.getElementById('modalPreviewImg').src = imgUrl;
        }

        function updateSelectionUI(gridId, activeElement) {
            const btns = document.getElementById(gridId).children;
            for(let btn of btns) { btn.classList.remove('selected'); }
            if(activeElement) activeElement.classList.add('selected');
        }

        function confirmPlushieOrder() {
            if(!selectedCharacter || !selectedSize) { alert("Please select both Character and Size! \nËØ∑ÈÄâÊã©Ê¨æÂºèÂíåÂ∞∫ÂØ∏ÔºÅ"); return; }
            let finalPriceRM = selectedPriceRM;
            if(selectedCharacter.includes("Pair")) { finalPriceRM = selectedPriceRM * 2; }
            const finalPriceForeign = formatPrice(finalPriceRM);
            const message = `Hi Bubu Dudu Store! üêª\n\nI want to order **Plushie Doll**:\n\n1. Character: ${selectedCharacter}\n2. Size: ${selectedSize}\n\nüí∞ Price: RM ${finalPriceRM} (approx ${finalPriceForeign})\n\nIs this available?`;
            sendToWhatsapp(message);
            closeModal();
        }

        window.onclick = function(event) { if (event.target == document.getElementById('plushieModal')) { closeModal(); } }

        function sendToWhatsapp(msg) {
            const encodedMsg = encodeURIComponent(msg);
            const whatsappUrl = `https://wa.me/${myPhoneNumber}?text=${encodedMsg}`;
            window.open(whatsappUrl, '_blank');
        }

        searchInput.addEventListener('input', (e) => {
            const keyword = e.target.value.toLowerCase();
            const filtered = products.filter(p => p.name.toLowerCase().includes(keyword));
            renderProducts(filtered);
        });

        renderProducts(products);
        updateModalPrices();
    </script>
</body>
</html>





