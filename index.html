<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubu Dudu Store</title>
    <link rel="icon" type="image/png" href="https://i.postimg.cc/XqPRJTcj/Whats-App-Image-2026-01-11-at-6-52-12-PM-2-removebg-preview.png">

    <style>
        /* --- åŸºç¡€æ ·å¼ --- */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #fafafa; margin: 0; padding: 20px; color: #262626; padding-bottom: 80px; }
        
        header { text-align: center; margin-bottom: 25px; padding-top: 10px; }
        .store-logo { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; border: 4px solid #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 12px; }
        h1 { margin: 0; font-size: 22px; color: #262626; font-weight: 800; letter-spacing: -0.5px; }
        p.subtitle { color: #8e8e8e; font-size: 13px; margin-top: 6px; }

        /* âœ¨ æ§åˆ¶æ  */
        .controls-container {
            display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; margin-bottom: 15px;
        }
        .control-select {
            padding: 8px 20px; border-radius: 30px; border: 1px solid #dbdbdb; background-color: #fff; font-size: 14px; font-weight: bold; color: #333; outline: none; cursor: pointer; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); -webkit-appearance: none; 
        }
        .control-select:focus { border-color: #0095f6; }

        .search-wrapper { margin-bottom: 20px; }
        .search-box { width: 100%; padding: 12px 15px; border: 1px solid #dbdbdb; border-radius: 8px; background-color: #efefef; font-size: 16px; box-sizing: border-box; outline: none; }
        
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; }
        
        .product-card { background: white; border: 1px solid #dbdbdb; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; padding-bottom: 15px; position: relative;}
        
        /* è½®æ’­å›¾ */
        .carousel-wrapper { position: relative; width: 100%; height: 300px; background-color: #ffffff; }
        .carousel-scroll { display: flex; width: 100%; height: 100%; overflow-x: auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; }
        .carousel-img { flex: 0 0 100%; width: 100%; height: 100%; object-fit: contain; scroll-snap-align: start; }
        .carousel-scroll::-webkit-scrollbar { display: none; }
        .carousel-badge { position: absolute; bottom: 10px; right: 10px; background: rgba(0,0,0,0.6); color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px; pointer-events: none; }

        .product-header { padding: 15px; border-bottom: 1px solid #eee; }
        .product-name { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
        .product-desc { font-size: 13px; color: #666; white-space: pre-line; }

        .options-container { padding: 10px 15px; display: flex; flex-direction: column; gap: 12px; }
        .option-row { display: flex; align-items: center; border: 1px solid #eee; border-radius: 8px; padding: 10px; background-color: #fcfcfc; }
        .option-thumb { width: 70px; height: 70px; border-radius: 6px; object-fit: contain; margin-right: 12px; border: 1px solid #eee; background: #fff;}
        .option-details { flex: 1; }
        .option-title { font-size: 14px; font-weight: bold; color: #333; }
        .option-price { color: #E1306C; font-weight: bold; font-size: 15px; margin-top: 2px; }
        
        .qty-row { margin-top: 5px; display: flex; align-items: center; font-size: 12px; color: #666;}
        .qty-input { width: 40px; padding: 2px; text-align: center; border: 1px solid #ccc; border-radius: 4px; margin-left: 5px; }

        .action-btn { padding: 8px 12px; border: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; margin-left: 10px; white-space: nowrap; }
        .btn-blue { background-color: #0095f6; color: white; }
        .btn-orange { background-color: #fca311; color: white; }
        .btn-purple { background-color: #8338ec; color: white; }
        button:active { opacity: 0.7; }

        /* å¼¹çª— */
        .modal {
            display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center;
        }
        .modal-content {
            background-color: #fff; padding: 20px; border-radius: 12px;
            width: 85%; max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); text-align: left; position: relative;
            max-height: 90vh; overflow-y: auto;
        }
        .modal-header { font-size: 18px; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .close-modal { position: absolute; right: 20px; top: 15px; font-size: 24px; cursor: pointer; color: #999; }
        
        .modal-preview-wrapper { text-align: center; margin-bottom: 15px; background: #f9f9f9; border-radius: 8px; padding: 10px; }
        .modal-preview-img { width: 100%; height: 220px; object-fit: contain; border-radius: 8px; }

        .modal-section { margin-bottom: 15px; }
        .modal-label { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 8px; display: block; }
        
        .selection-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .selection-btn {
            border: 1px solid #ddd; background: #fff; padding: 10px; border-radius: 8px;
            text-align: center; font-size: 14px; cursor: pointer; transition: 0.2s;
        }
        .selection-btn.selected { background-color: #e3f2fd; border-color: #0095f6; color: #0095f6; font-weight: bold; }

        /* è¢œå­è‡ªå®šä¹‰æ•°é‡è¾“å…¥åŒºåŸŸ */
        .custom-qty-wrapper { margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; display: none; }
        .custom-qty-row { display: flex; align-items: center; margin-top: 5px; }
        .custom-qty-input { width: 60px; padding: 8px; border: 1px solid #ccc; border-radius: 6px; text-align: center; font-size: 16px; margin-left: 10px; }

        .confirm-btn {
            width: 100%; padding: 12px; background-color: #0095f6; color: white;
            border: none; border-radius: 8px; font-size: 16px; font-weight: bold; margin-top: 10px; cursor: pointer;
        }

        footer { margin-top: 40px; padding: 20px; background-color: #fff; border-top: 1px solid #eee; border-radius: 12px; text-align: center; font-size: 13px; color: #666; line-height: 1.6; }
        .footer-title { font-weight: bold; color: #333; margin-bottom: 8px; font-size: 14px; }
        .social-section { margin-top: 25px; border-top: 1px solid #eee; padding-top: 20px; }
        .social-icons { display: flex; justify-content: center; gap: 25px; align-items: center; margin-top: 10px;}
        .social-link img { width: 40px; height: 40px; border-radius: 8px; display: block; }
        
        .float-btn { position: fixed; bottom: 20px; right: 20px; background-color: #25D366; color: white; padding: 10px 20px; border-radius: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); font-weight: bold; text-decoration: none; z-index: 100; display: flex; align-items: center; gap: 8px; }
        .wa-logo-img { width: 24px; height: 24px; object-fit: contain; }
    </style>
</head>
<body>

    <header>
        <img src="https://i.postimg.cc/pXqynd9c/Bubu-dudu-shop-logo.jpg" alt="Bubu Dudu Store Logo" class="store-logo">
        <h1 id="txt_title">Bubu Dudu Store ä¸€äºŒå¸ƒå¸ƒå•†åº—</h1>
        <p class="subtitle" id="txt_subtitle">100% Authentic Blind Boxes Â· Custom Video | WhatsApp Order</p>

        <div class="controls-container">
            <select id="langSelector" class="control-select" onchange="changeLanguage()">
                <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                <option value="en">ğŸ‡¬ğŸ‡§ English</option>
            </select>

            <select id="currencySelector" class="control-select" onchange="changeCurrency()">
                <option value="MYR">ğŸ‡²ğŸ‡¾ MYR</option>
                <option value="SGD">ğŸ‡¸ğŸ‡¬ SGD</option>
                <option value="USD">ğŸ‡ºğŸ‡¸ USD</option>
            </select>
        </div>
    </header>
    
    <div class="search-wrapper">
        <input type="text" id="searchInput" class="search-box" placeholder="ğŸ” æœç´¢å•†å“...">
    </div>

    <div id="productContainer" class="product-grid"></div>

    <footer>
        <div class="footer-title" id="txt_purchase_info">ğŸ“¦ è´­ä¹°é¡»çŸ¥</div>
        <p id="txt_footer_desc">
            <b>å‘è´§ (ç›²ç›’ & å…¬ä»”):</b> J&T Express / PosLaju<br>
            <b>å®šåˆ¶è§†é¢‘:</b> ğŸŒ å…¨çƒå‘è´§ (çº¿ä¸Šäº¤ä»˜)<br>
            âš ï¸ æ‹†å°ä¸é€€æ¢
        </p>
        <p style="font-size:12px; color:#E1306C; font-weight:bold;" id="txt_disclaimer">
            * æ±‡ç‡ä»…ä¾›å‚è€ƒï¼Œå…·ä½“ä»·æ ¼ä»¥ç§èŠä¸ºå‡†ã€‚
        </p>

        <div class="social-section">
            <span style="font-weight:bold; font-size:14px;" id="txt_follow_us">å…³æ³¨æˆ‘ä»¬ Follow Us</span>
            <div class="social-icons">
                <a href="https://xhslink.com/m/5bQZ298AzfF" target="_blank" class="social-link"><img src="https://i.postimg.cc/Jz7q8tXg/Xiaohongshu-LOGO.png"></a>
                <a href="https://www.instagram.com/bubu_dudu_store?igsh=cWt3enZpZGszNWJx" target="_blank" class="social-link"><img src="https://i.postimg.cc/9fKtypkw/Instagram-icon.png"></a>
                <a href="https://www.tiktok.com/@yierlovebubu1212?_r=1&_t=ZS-92KcH6zZuSd" target="_blank" class="social-link"><img src="https://i.postimg.cc/76z19zvQ/tiktok-app-icon-social-media-logo-277909-647.avif"></a>
            </div>
        </div>
        <p style="margin-top:20px; font-size:12px; color:#999;">Â© 2025 Bubu Dudu Store</p>
    </footer>

    <a href="https://wa.me/601110720061?text=Hi%20Bubu%20Dudu%20Store" target="_blank" class="float-btn">
        <img src="https://i.postimg.cc/YCkWKP5R/Whats-App-svg.webp" class="wa-logo-img"> Chat
    </a>

    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div class="modal-header" id="txt_modal_title">é€‰æ‹©è§„æ ¼</div>
            
            <div class="modal-preview-wrapper">
                <img id="modalPreviewImg" src="" class="modal-preview-img">
            </div>

            <div class="modal-section" id="sectionChar">
                <span class="modal-label" id="txt_modal_char">1. æ¬¾å¼ <span style="color:red">*</span></span>
                <div class="selection-grid" id="charGrid">
                    <div class="selection-btn" onclick="selectOption('char', this, 'Bubu', 'https://i.postimg.cc/zbbjL2wx/Whats-App-Image-2026-02-01-at-12-17-46-PM-(2).jpg')">ğŸ»â€â„ï¸ Bubu (ä¸€äºŒ)</div>
                    <div class="selection-btn" onclick="selectOption('char', this, 'Dudu', 'https://i.postimg.cc/sQQcBHP4/Whats-App-Image-2026-02-01-at-12-17-47-PM.jpg')">ğŸ» Dudu (å¸ƒå¸ƒ)</div>
                    <div class="selection-btn" style="grid-column: span 2;" onclick="selectOption('char', this, 'Pair', 'https://i.postimg.cc/Hx3PhfVf/Whats-App-Image-2026-02-01-at-12-21-33-PM.jpg')">ğŸ’• Pair (ä¸€å¯¹)</div>
                </div>
            </div>

            <div class="modal-section">
                <span class="modal-label" id="txt_modal_size">2. å°ºå¯¸ <span style="color:red">*</span></span>
                <div class="selection-grid" id="sizeGrid">
                    </div>
                
                <div id="customQtySection" class="custom-qty-wrapper">
                    <span class="modal-label" id="txt_custom_qty">æˆ– è‡ªå®šä¹‰æ•°é‡:</span>
                    <div class="custom-qty-row">
                        <input type="number" id="socksCustomInput" class="custom-qty-input" value="" min="1" placeholder="Qty" oninput="updateSocksCustomPrice()">
                        <span style="margin-left:10px; font-weight:bold; color:#E1306C;" id="customPriceDisplay"></span>
                    </div>
                </div>
            </div>

            <button class="confirm-btn" id="txt_modal_confirm" onclick="confirmOrder()">ç¡®è®¤ä¸‹å•</button>
        </div>
    </div>

    <script>
        const myPhoneNumber = "601110720061"; 
        
        const translations = {
            zh: {
                title: "Bubu Dudu Store ä¸€äºŒå¸ƒå¸ƒå•†åº—",
                subtitle: "100% æ­£å“ç›²ç›’ Â· ä¸“å±å®šåˆ¶è§†é¢‘ | WhatsApp ä¸‹å•",
                searchPlaceholder: "ğŸ” æœç´¢å•†å“...",
                purchaseInfo: "ğŸ“¦ è´­ä¹°é¡»çŸ¥",
                footerDesc: "<b>å‘è´§ (ç›²ç›’ & å…¬ä»”):</b> J&T Express / PosLaju<br><b>å®šåˆ¶è§†é¢‘:</b> ğŸŒ å…¨çƒå‘è´§ (çº¿ä¸Šäº¤ä»˜)<br>âš ï¸ æ‹†å°ä¸é€€æ¢",
                disclaimer: "* æ±‡ç‡ä»…ä¾›å‚è€ƒï¼Œå…·ä½“ä»·æ ¼ä»¥ç§èŠä¸ºå‡†ã€‚",
                followUs: "å…³æ³¨æˆ‘ä»¬ Follow Us",
                singleBtn: "å•ç›’ / Single",
                setBtn: "ç«¯ç›’ / Whole Set",
                inquireBtn: "å’¨è¯¢ / Inquire",
                quotePrice: "ç§ä¿¡è¯¢ä»·",
                chooseSize: "é€‰å°ºå¯¸ / Choose Size",
                selectQty: "é€‰æ•°é‡ / Select Qty",
                buyNow: "è´­ä¹° / Buy", 
                modalTitle: "é€‰æ‹©è§„æ ¼",
                modalChar: "1. æ¬¾å¼",
                modalSize: "2. å°ºå¯¸",
                modalBundle: "é€‰æ‹©ä¼˜æƒ å¥—é¤",
                modalConfirm: "ç¡®è®¤ä¸‹å•",
                customQty: "æˆ– è‡ªå®šä¹‰æ•°é‡:",
                soldOut: "âŒ å”®ç½„",
                swipe: "æ»‘åŠ¨ â†”",
                pairs: "åŒ",
                freeShip: "åŒ…é‚®"
            },
            en: {
                title: "Bubu Dudu Store",
                subtitle: "100% Authentic Blind Boxes Â· Custom Video | WhatsApp Order",
                searchPlaceholder: "ğŸ” Search Products...",
                purchaseInfo: "ğŸ“¦ Purchase Info",
                footerDesc: "<b>Shipping (Blind Box & Plushie):</b> J&T Express / PosLaju<br><b>Custom Video:</b> ğŸŒ Global Delivery (Online)<br>âš ï¸ No return after opening",
                disclaimer: "* Foreign currency prices are estimates only. Final price confirmed via WhatsApp.",
                followUs: "Follow Us",
                singleBtn: "Single Box",
                setBtn: "Whole Set",
                inquireBtn: "Inquire",
                quotePrice: "DM for Quote",
                chooseSize: "Choose Size",
                selectQty: "Select Qty",
                buyNow: "Buy Now",
                modalTitle: "Choose Options",
                modalChar: "1. Character",
                modalSize: "2. Size",
                modalBundle: "Select Bundle Deal",
                modalConfirm: "Confirm Order",
                customQty: "Or Custom Qty:",
                soldOut: "âŒ Sold Out",
                swipe: "Swipe â†”",
                pairs: "Pairs",
                freeShip: "Free Ship"
            }
        };

        const exchangeRates = {
            'MYR': { rate: 1, symbol: 'RM' },
            'SGD': { rate: 0.40, symbol: 'S$' },
            'USD': { rate: 0.35, symbol: 'US$' }
        };

        let currentCurrency = 'MYR';
        let currentLang = 'zh';

        let currentProductType = ''; 
        let selectedOption1 = ""; // Character or null
        let selectedOption2 = ""; // Size or Bundle Name
        let selectedPriceRM = 0; 
        
        const products = [
            {
                id: 'custom-video',
                name: { zh: "Custom Bubu Dudu Video (ä¸“å±å®šåˆ¶è§†é¢‘)", en: "Custom Bubu Dudu Video" },
                desc: { zh: "æˆ‘ä»¬ä¸ºæ‚¨æ‰“é€ æœ€æ²»æ„ˆçš„ä¸“å±å®šåˆ¶è§†é¢‘ï¼\nç”Ÿæ—¥ã€çºªå¿µæ—¥ã€æ±‚å©šã€ç”Ÿæ´»æ•…äº‹ã€‚\nğŸŒ **å…¨çƒäº¤ä»˜**", en: "We create the most heartwarming custom videos for you!\nAnniversaries, Birthdays, Proposals.\nğŸŒ **Global Delivery**" },
                price: 0, isCustom: true, inStock: true,
                imgProducts: ["https://i.postimg.cc/yxhjTRqY/bubu-dudu-custom-video.jpg"],
                imgSingle: "https://i.postimg.cc/yxhjTRqY/bubu-dudu-custom-video.jpg"
            },
            {
                // âœ¨ è¢œå­
                id: 4,
                name: { zh: "ä¸€äºŒå¸ƒå¸ƒå…¨æ£‰ä¸­ç­’è¢œ | é«˜å¼¹ä¸å‹’è„š", en: "[Premium Knit] Bubu & Dudu Cotton Crew Socks" },
                desc: { 
                    // ğŸ”´ å°ºç å·²ä¿®æ”¹ä¸º 33-44ç 
                    zh: "æ‹’ç»ä½è´¨é‡å°èŠ±ï¼åŒé¢æèŠ±å·¥è‰ºï¼Œä¹…ç©¿ä¸æ‰è‰²ã€‚\nğŸ’° **ä»·æ ¼:** 1åŒ RM15 | 3åŒ RM28 | 5åŒ RM42 (åŒ…é‚®)\nğŸ§¶ **æè´¨:** 78%æ£‰ + 19%èšé…¯çº¤ç»´ + 3%æ°¨çº¶\nğŸ“ **å°ºç :** 33-44ç  (è¶…å¼ºå¼¹åŠ›)\nâœ¨ **å·¥è‰º:** åŠ å¯†é’ˆç»‡ï¼Œè´¨æ„Ÿåšå®", 
                    en: "Double-sided jacquard craftsmanship, patterns won't fade.\nğŸ’° **Price:** 1 Pair RM15 | 3 Pairs RM28 | 5 Pairs RM42 (Free Ship)\nğŸ§¶ **Material:** 78% Cotton + 19% Poly + 3% Spandex\nğŸ“ **Size:** EU 33-44 (High Elasticity)\nâœ¨ **Craft:** High-density knitting" 
                },
                price: 15, 
                inStock: true, isCustom: false, isPlushie: false, isSocks: true,
                imgProducts: [
                    "https://i.postimg.cc/SnXtJ2sr/Whats-App-Image-2026-02-12-at-7-12-58-PM.jpg", 
                    "https://i.postimg.cc/ts1mYZTS/Whats-App-Image-2026-02-12-at-7-12-59-PM.jpg", 
                    "https://i.postimg.cc/4YKFm7d8/Whats-App-Image-2026-02-12-at-7-13-02-PM.jpg"
                ], 
                imgSingle: "https://i.postimg.cc/SnXtJ2sr/Whats-App-Image-2026-02-12-at-7-12-58-PM.jpg"
            },
            { 
                id: 3, 
                name: { zh: "Bubu Dudu Plushie Doll (ä¸€äºŒå¸ƒå¸ƒç»’æ¯›å…¬ä»”)", en: "Bubu Dudu Plushie Doll" },
                desc: { zh: "è¶…çº§è½¯èŒï¼ä¸€äºŒ å’Œ å¸ƒå¸ƒã€‚\nğŸ“ **å°ºå¯¸:** 25cm / 35cm / 45cm / 60cm", en: "Super soft! Bubu & Dudu.\nğŸ“ **Sizes:** 25cm / 35cm / 45cm / 60cm" },
                price: 25, priceMax: 90, inStock: true, isCustom: false, isPlushie: true,
                imgProducts: [
                    "https://i.postimg.cc/PCFhTNSM/Whats-App-Image-2026-02-01-at-1-04-39-PM.jpg", 
                    "https://i.postimg.cc/Hx3PhfVf/Whats-App-Image-2026-02-01-at-12-21-33-PM.jpg", 
                    "https://i.postimg.cc/zbbjL2wx/Whats-App-Image-2026-02-01-at-12-17-46-PM-(2).jpg", 
                    "https://i.postimg.cc/sQQcBHP4/Whats-App-Image-2026-02-01-at-12-17-47-PM.jpg", 
                    "https://i.postimg.cc/qvJsqzqv/Whats-App-Image-2026-02-01-at-1-04-39-PM-(2).jpg", 
                    "https://i.postimg.cc/fJ4Hdsrt/Whats-App-Image-2026-02-01-at-12-17-45-PM.jpg", 
                    "https://i.postimg.cc/Bt13sqFj/Whats-App-Image-2026-02-01-at-12-41-31-PM.jpg", 
                    "https://i.postimg.cc/V0MPFR1P/Whats-App-Image-2026-02-01-at-12-41-31-PM-(1).jpg",
                    "https://i.postimg.cc/KYPWnKFD/Whats-App-Image-2026-02-01-at-12-17-45-PM-(1).jpg",
                    "https://i.postimg.cc/qhhLtDcm/Whats-App-Image-2026-02-01-at-12-17-45-PM-(2).jpg",
                    "https://i.postimg.cc/N994yC8b/Whats-App-Image-2026-02-01-at-12-17-46-PM.jpg",
                    "https://i.postimg.cc/sQQcBHPJ/Whats-App-Image-2026-02-01-at-12-17-46-PM-(1).jpg"
                ],
                imgSingle: "https://i.postimg.cc/PCFhTNSM/Whats-App-Image-2026-02-01-at-1-04-39-PM.jpg",
                imgWhole:  ""    
            },
            { 
                id: 1, 
                name: { zh: "Bubu Dudu Series 2 (ä¸€äºŒå¸ƒå¸ƒ ç¬¬äºŒå¼¹)", en: "Bubu Dudu Series 2 (Blind Box)" },
                desc: { zh: "è¶…çº§å¯çˆ±çš„ä¸€äºŒå¸ƒå¸ƒç›²ç›’ï¼å‘å·¦æ»‘åŠ¨æŸ¥çœ‹æ›´å¤šå›¾ç‰‡ ğŸ‘‰\nä¸€ç›’æœ‰ä¸¤ä¸ªï¼ˆä¸€äºŒå’Œå¸ƒå¸ƒï¼‰", en: "Super cute Bubu Dudu blind box! Swipe left to see more ğŸ‘‰\nOne box get two (bubu and dudu)" },
                price: 25, wholeSetPrice: 200, setCount: 10, inStock: true,
                imgProducts: ["https://i.postimg.cc/HnXMk5MF/di-er-dan-chan-pin1.jpg","https://i.postimg.cc/FsbctyNJ/di-er-dan-chan-pin2.jpg","https://i.postimg.cc/XvqyytFv/di-er-dan-chan-pin3.jpg"],
                imgSingle: "https://i.postimg.cc/521tV8yz/di-er-dan-yi-he.jpg", imgWhole: "https://i.postimg.cc/2jMmzhcd/di-er-dan-duan-he.jpg"    
            },
            { 
                id: 2, 
                name: { zh: "Bubu Dudu Series 3 (ä¸€äºŒå¸ƒå¸ƒ ç¬¬ä¸‰å¼¹)", en: "Bubu Dudu Series 3 (Blind Box)" },
                desc: { zh: "æœ€æ–°å‘å¸ƒçš„ç¬¬ä¸‰å¼¹ï¼ âœ¨\nä¸€ç›’æœ‰ä¸¤ä¸ªï¼ˆä¸€äºŒå’Œå¸ƒå¸ƒï¼‰", en: "New Series 3 released! âœ¨\nOne box get two (bubu and dudu)" },
                price: 25, wholeSetPrice: 240, setCount: 12, inStock: true,
                imgProducts: ["https://i.postimg.cc/Yq6PYfcx/di-san-dan-chan-pin1.jpg","https://i.postimg.cc/MHy90xLz/di-san-dan-chan-pin2.jpg","https://i.postimg.cc/g0XqqmXd/di-san-dan-chan-pin3.jpg"],
                imgSingle: "https://i.postimg.cc/SRXZnC6n/di-san-dan-dan-he.jpg", imgWhole: "https://i.postimg.cc/xdRph0fh/di-san-dan-duan-he.jpg"    
            }
        ];

        const container = document.getElementById('productContainer');
        const searchInput = document.getElementById('searchInput');

        // --- æ ¸å¿ƒé€»è¾‘ ---

        function formatPrice(priceInRM) {
            const currencyData = exchangeRates[currentCurrency];
            const converted = (priceInRM * currencyData.rate).toFixed(2);
            return `${currencyData.symbol} ${converted}`;
        }

        function changeCurrency() {
            currentCurrency = document.getElementById('currencySelector').value;
            renderProducts(products);
            // åªè¦å¼¹çª—æ˜¯å¼€ç€çš„ï¼Œå°±å¿…é¡»æ›´æ–°é‡Œé¢çš„ä»·æ ¼
            if(document.getElementById('productModal').style.display === 'flex') {
                updateModalContent();
            }
            updateStaticText();
        }

        function changeLanguage() {
            currentLang = document.getElementById('langSelector').value;
            updateStaticText();
            renderProducts(products);
            if(document.getElementById('productModal').style.display === 'flex') {
                updateModalContent();
            }
        }

        function updateStaticText() {
            const t = translations[currentLang];
            document.getElementById('txt_title').innerText = t.title;
            document.getElementById('txt_subtitle').innerText = t.subtitle;
            document.getElementById('txt_purchase_info').innerText = t.purchaseInfo;
            document.getElementById('txt_footer_desc').innerHTML = t.footerDesc;
            document.getElementById('txt_disclaimer').innerText = t.disclaimer;
            document.getElementById('txt_follow_us').innerText = t.followUs;
        }

        function renderProducts(items) {
            container.innerHTML = "";
            const t = translations[currentLang];

            if(items.length === 0) { 
                container.innerHTML = `<p style='text-align:center;width:100%'>${currentLang === 'zh' ? 'æœªæ‰¾åˆ°å•†å“' : 'No products found'}</p>`; 
                return; 
            }

            items.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';

                let slidesHtml = '';
                if(product.imgProducts && product.imgProducts.length > 0) {
                    product.imgProducts.forEach(imgUrl => { slidesHtml += `<img src="${imgUrl}" class="carousel-img">`; });
                } else { slidesHtml = `<img src="https://via.placeholder.com/600x400" class="carousel-img">`; }

                let wholeSetOptionHtml = '';
                let priceDisplay = '';
                let singleBtnText = t.singleBtn;
                let btnColorClass = "btn-blue";
                let qtyDisplay = `Qty: <input type="number" id="qty-${product.id}" class="qty-input" value="1" min="1">`;
                let clickAction = "";

                let pName = product.name[currentLang] || product.name['en'];
                let pDesc = product.desc[currentLang] || product.desc['en'];

                if(product.isPlushie) {
                    priceDisplay = `${formatPrice(product.price)} - ${formatPrice(product.priceMax)}`;
                    singleBtnText = t.chooseSize;
                    qtyDisplay = "";
                    clickAction = `openModal('plushie', '${product.imgSingle}')`;
                } else if(product.isSocks) {
                    priceDisplay = `${formatPrice(product.price)} / ${t.pairs}`;
                    singleBtnText = t.selectQty;
                    qtyDisplay = "";
                    clickAction = `openModal('socks', '${product.imgSingle}')`;
                } else if(product.isCustom) {
                    priceDisplay = t.quotePrice;
                    singleBtnText = t.inquireBtn;
                    btnColorClass = "btn-purple";
                    qtyDisplay = "";
                    clickAction = `orderCustomVideo('${pName}')`;
                } else {
                    priceDisplay = `${formatPrice(product.price)} / each`;
                    clickAction = `orderSingle('${pName}', ${product.price}, '${product.id}')`;
                    
                    if (product.wholeSetPrice && product.setCount) {
                        wholeSetOptionHtml = `
                            <div class="option-row">
                                <img src="${product.imgWhole}" class="option-thumb" alt="Whole Set">
                                <div class="option-details">
                                    <div class="option-title">ğŸ”¥ ${t.setBtn} (${product.setCount} pcs)</div>
                                    <div class="option-price">${formatPrice(product.wholeSetPrice)}</div>
                                </div>
                                <button class="action-btn btn-orange" onclick="orderWholeSet('${pName}', ${product.wholeSetPrice}, ${product.setCount})">
                                    ${t.setBtn}
                                </button>
                            </div>
                        `;
                    }
                }

                card.innerHTML = `
                    <div style="height:100%; display:flex; flex-direction:column;">
                        ${!product.inStock ? `<div class="sold-out-overlay">${t.soldOut}</div>` : ''}
                        <div class="carousel-wrapper">
                            <div class="carousel-scroll">${slidesHtml}</div>
                            <div class="carousel-badge">${t.swipe}</div>
                        </div>
                        <div class="product-header">
                            <div class="product-name">${pName}</div>
                            <div class="product-desc">${pDesc}</div>
                        </div>
                        <div class="options-container">
                            <div class="option-row">
                                <img src="${product.imgSingle}" class="option-thumb" alt="Item">
                                <div class="option-details">
                                    <div class="option-title">${(product.isPlushie || product.isSocks) ? pName : t.singleBtn}</div>
                                    <div class="option-price" style="${product.isCustom ? 'color:#8338ec' : ''}">${priceDisplay}</div>
                                    <div class="qty-row">${qtyDisplay}</div>
                                </div>
                                <button class="action-btn ${btnColorClass}" onclick="${clickAction}">
                                    ${singleBtnText}
                                </button>
                            </div>
                            ${wholeSetOptionHtml}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- å¼¹çª—é€»è¾‘ (é‡å†™ï¼Œç¡®ä¿åˆ‡æ¢æ— è¯¯) ---
        function openModal(type, imgUrl) {
            currentProductType = type;
            document.getElementById('productModal').style.display = 'flex';
            document.getElementById('modalPreviewImg').src = imgUrl;
            
            // é‡ç½®
            selectedOption1 = ""; selectedOption2 = ""; selectedPriceRM = 0;
            document.getElementById('socksCustomInput').value = "";
            document.getElementById('customPriceDisplay').innerText = "";
            
            // æ¸…é™¤æ—§çš„é€‰ä¸­çŠ¶æ€
            const gridChar = document.getElementById('charGrid');
            Array.from(gridChar.children).forEach(btn => btn.classList.remove('selected'));

            updateModalContent();
        }

        // æ ¸å¿ƒï¼šæ ¹æ®å½“å‰äº§å“ç±»å‹ï¼Œé‡æ–°å¡«å……å†…å®¹
        function updateModalContent() {
            const t = translations[currentLang];
            const gridSize = document.getElementById('sizeGrid');
            const sectionChar = document.getElementById('sectionChar');
            const sectionCustom = document.getElementById('customQtySection');
            
            document.getElementById('txt_modal_confirm').innerText = t.modalConfirm;
            document.getElementById('txt_modal_title').innerText = t.modalTitle;

            if (currentProductType === 'plushie') {
                sectionChar.style.display = 'block'; 
                sectionCustom.style.display = 'none';
                document.getElementById('txt_modal_char').innerHTML = `${t.modalChar} <span style="color:red">*</span>`;
                document.getElementById('txt_modal_size').innerHTML = `${t.modalSize} <span style="color:red">*</span>`;
                
                // å¡«å……å…¬ä»”å°ºå¯¸
                gridSize.innerHTML = `
                    <div class="selection-btn size-btn" data-type="plushie" data-price-rm="25" onclick="selectOption('size', this, '25cm', 25)">25cm (${formatPrice(25)})</div>
                    <div class="selection-btn size-btn" data-type="plushie" data-price-rm="40" onclick="selectOption('size', this, '35cm', 40)">35cm (${formatPrice(40)})</div>
                    <div class="selection-btn size-btn" data-type="plushie" data-price-rm="60" onclick="selectOption('size', this, '45cm', 60)">45cm (${formatPrice(60)})</div>
                    <div class="selection-btn size-btn" data-type="plushie" data-price-rm="90" onclick="selectOption('size', this, '60cm', 90)">60cm (${formatPrice(90)})</div>
                `;
                
            } else if (currentProductType === 'socks') {
                sectionChar.style.display = 'none'; 
                sectionCustom.style.display = 'block';
                document.getElementById('txt_modal_size').innerHTML = `${t.modalBundle} <span style="color:red">*</span>`;
                document.getElementById('txt_custom_qty').innerText = t.customQty;
                
                // å¡«å……è¢œå­å¥—é¤
                gridSize.innerHTML = `
                    <div class="selection-btn size-btn" data-type="socks" data-price-rm="15" onclick="selectOption('size', this, '1 ${t.pairs}', 15)">1 ${t.pairs} (${formatPrice(15)})</div>
                    <div class="selection-btn size-btn" data-type="socks" data-price-rm="28" onclick="selectOption('size', this, '3 ${t.pairs}', 28)">3 ${t.pairs} (${formatPrice(28)})</div>
                    <div class="selection-btn size-btn" data-type="socks" style="grid-column: span 2;" data-price-rm="42" onclick="selectOption('size', this, '5 ${t.pairs} (${t.freeShip})', 42)">ğŸ”¥ 5 ${t.pairs} (${t.freeShip}) (${formatPrice(42)})</div>
                `;
            }
        }

        function closeModal() { document.getElementById('productModal').style.display = 'none'; }

        // ç‚¹å‡»é€‰é¡¹
        function selectOption(group, element, value, priceOrUrl) {
            const gridId = group === 'char' ? 'charGrid' : 'sizeGrid';
            const btns = document.getElementById(gridId).children;
            for(let btn of btns) { btn.classList.remove('selected'); }
            element.classList.add('selected');

            if(group === 'char') {
                selectedOption1 = value;
                if(priceOrUrl) document.getElementById('modalPreviewImg').src = priceOrUrl;
            } else {
                selectedOption2 = value; // 25cm or 3 Pairs
                selectedPriceRM = priceOrUrl; // 25 or 28
                
                // å¦‚æœæ˜¯è¢œå­ï¼Œå¹¶ä¸”ç‚¹äº†ä¸Šé¢çš„å¥—é¤ï¼Œæ¸…ç©ºä¸‹é¢è‡ªå®šä¹‰è¾“å…¥
                if(currentProductType === 'socks') {
                    document.getElementById('socksCustomInput').value = "";
                    document.getElementById('customPriceDisplay').innerText = "";
                }
                
                // å…¬ä»”å›¾ç‰‡åˆ‡æ¢é€»è¾‘
                if(currentProductType === 'plushie') {
                    if(value.includes('25') || value.includes('35')) document.getElementById('modalPreviewImg').src = "https://i.postimg.cc/Bt13sqFj/Whats-App-Image-2026-02-01-at-12-41-31-PM.jpg";
                    if(value.includes('45') || value.includes('60')) document.getElementById('modalPreviewImg').src = "https://i.postimg.cc/V0MPFR1P/Whats-App-Image-2026-02-01-at-12-41-31-PM-(1).jpg";
                }
            }
        }

        // è¢œå­è‡ªå®šä¹‰æ•°é‡é€»è¾‘
        function updateSocksCustomPrice() {
            const qty = document.getElementById('socksCustomInput').value;
            if(qty > 0) {
                const price = qty * 15; 
                document.getElementById('customPriceDisplay').innerText = formatPrice(price);
                
                // å–æ¶ˆä¸Šé¢çš„å¥—é¤é€‰ä¸­
                const btns = document.getElementById('sizeGrid').children;
                for(let btn of btns) { btn.classList.remove('selected'); }
                
                const t = translations[currentLang];
                selectedOption2 = `${t.customQty} ${qty}`;
                selectedPriceRM = price;
            } else {
                document.getElementById('customPriceDisplay').innerText = "";
            }
        }

        function confirmOrder() {
            if(currentProductType === 'plushie') {
                if(!selectedOption1 || !selectedOption2) { alert("Please select Character and Size!"); return; }
            } else if(currentProductType === 'socks') {
                if(!selectedOption2 && document.getElementById('socksCustomInput').value == "") { alert("Please select Quantity!"); return; }
                selectedOption1 = "White (Default)"; 
            }

            let finalPriceRM = selectedPriceRM;
            if(currentProductType === 'plushie' && selectedOption1.includes("Pair")) { 
                finalPriceRM = selectedPriceRM * 2; 
            }

            const approxPrice = formatPrice(finalPriceRM);
            let prodName = currentProductType === 'plushie' ? "Plushie Doll" : "Cotton Socks";
            
            const msg = `Hi Bubu Dudu Store! ğŸ»\nI want to order **${prodName}**:\n1. Option: ${selectedOption1}\n2. Spec: ${selectedOption2}\nğŸ’° Price: RM ${finalPriceRM} (approx ${approxPrice})`;
            
            sendToWhatsapp(msg);
            closeModal();
        }

        function orderSingle(name, priceRM, id) {
            const qtyInput = document.getElementById(`qty-${id}`);
            const quantity = qtyInput.value;
            const totalPriceRM = priceRM * quantity;
            const approxPrice = formatPrice(totalPriceRM);
            const msg = `Hi Bubu Dudu Store!\nI want to order:\nItem: ${name}\nQty: ${quantity}\nTotal: RM ${totalPriceRM} (approx ${approxPrice})`;
            sendToWhatsapp(msg);
        }

        function orderWholeSet(name, setPriceRM, count) {
            const approxPrice = formatPrice(setPriceRM);
            const msg = `Hi Bubu Dudu Store!\nI want to order:\nItem: ${name}\nType: ğŸ”¥ Whole Set (${count}pcs)\nPrice: RM ${setPriceRM} (approx ${approxPrice})`;
            sendToWhatsapp(msg);
        }
        
        function orderCustomVideo(name) {
            const msg = `Hi Bubu Dudu Store, Custom Video! ğŸ»\nI am interested in:\nğŸ¥ **${name}**\nRequesting a quote.`;
            sendToWhatsapp(msg);
        }

        function sendToWhatsapp(msg) {
            const encodedMsg = encodeURIComponent(msg);
            window.open(`https://wa.me/${myPhoneNumber}?text=${encodedMsg}`, '_blank');
        }

        searchInput.addEventListener('input', (e) => {
            const keyword = e.target.value.toLowerCase();
            const filtered = products.filter(p => {
                const nameEn = p.name.en.toLowerCase();
                const nameZh = p.name.zh.toLowerCase();
                return nameEn.includes(keyword) || nameZh.includes(keyword);
            });
            renderProducts(filtered);
        });

        updateStaticText();
        renderProducts(products);
    </script>
</body>
</html>






